; To build
; platformio run --environment tasmota32-beekeeper
; will create > .pio/build/tasmota32-beekeeper/firmware.factory.bin
;
; ***  PlatformIO Project Configuration Override File   ***
; ***  Beekeeper Honey Vending Machine - ESP32 WROOM-32D ***
; ***  Minimal build - only required libraries enabled   ***
;
; Hardware in use:
;   GPIO21/22   → I2C (LCD 1602 + MCP23017)
;   GPIO23/18/5 → 74HC595 shift register (bit-bang, no lib needed)
;   GPIO32      → Coin acceptor pulse input (no lib needed)
;   GPIO25/26/27→ DRV8825 stepper (no lib needed)

[platformio]
default_envs = tasmota32-beekeeper

[env:tasmota32-beekeeper]
extends                 = env:tasmota32_base
board                   = esp32dev
board_build.partitions  = partitions/esp32_partition_app1856k_fs1344k.csv
build_flags             = ${esp32_defaults.build_flags}
                          -DUSE_HONEY_WENDING_MACHINE
                          -DOTA_URL='"https://github.com/tasmos/beekeeper/releases/latest/download/tasmota32-beekeeper.bin.gz"'
                          -DCODE_IMAGE_STR='"tasmota32-beekeeper"'
                          -DPROJECT_URL='"https://github.com/tasmos/beekeeper/"'
lib_extra_dirs          = ${library.lib_extra_dirs}
                          lib/libesp32

[library]
shared_libdeps_dir      = lib
lib_extra_dirs          =
                          lib/lib_basic    ; Core Tasmota, MQTT, WebServer - always required
                          lib/lib_ssl      ; Required by Tasmota core (t_bearssl.h) - cannot be disabled
                          lib/lib_i2c      ; Required for MCP23017 (I2C GPIO expander)
                          lib/lib_display  ; Required for LCD 1602
; lib_audio   - DISABLED (no audio)
; lib_rf      - DISABLED (no RF433)
; lib_div     - DISABLED (not needed)